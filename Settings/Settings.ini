[Rainmeter]
Update = 1000
AccurateText = 1
DynamicWindowSize = 1
BackgroundMode=2
SolidColor=200,200,200,1
RightMouseDoubleClickAction=[!Refresh]

[Variables]
SettingsAlpha=100
SettingsAngle=0
Width=400
Height=200

Color=14, 41, 82
Color2=119, 156, 206
Color3=154, 187, 255
Color4=255, 97, 0
Color5=179, 166, 121
Color6=122, 148, 201
Color7=56, 75, 115

ChangeX=240
ApplyX=330

Resolution=#SCREENAREAWIDTH#x#SCREENAREAHEIGHT#

ScaleFactor=0.1

[SettingsToggle]
Meter=Image
ImageName=#@#gear.png
W=50
X=#Width#
Y=#Height#
ImageAlpha=#SettingsAlpha#
ImageTint=#Color6#
LeftMouseDownAction=[!ToggleMeter SettingsPaneContainer]
TransformationMatrix=(Cos(Rad(#SettingsAngle#)));(-Sin(Rad(#SettingsAngle#)));(Sin(Rad(#SettingsAngle#)));(Cos(Rad(#SettingsAngle#)));([#CURRENTSECTION#:X]+[#CURRENTSECTION#:W]/2)-([#CURRENTSECTION#:X]+[#CURRENTSECTION#:W]/2)*Cos(Rad(#SettingsAngle#))-([#CURRENTSECTION#:Y]+[#CURRENTSECTION#:H]/2)*Sin(Rad(#SettingsAngle#));([#CURRENTSECTION#:Y]+[#CURRENTSECTION#:H]/2)+([#CURRENTSECTION#:X]+[#CURRENTSECTION#:W]/2)*Sin(Rad(#SettingsAngle#))-([#CURRENTSECTION#:Y]+[#CURRENTSECTION#:H]/2)*Cos(Rad(#SettingsAngle#))
MouseOverAction=[!CommandMeasure MeasureSettingsToggle "Stop 2"][!CommandMeasure MeasureSettingsToggle "Execute 1"]
MouseLeaveAction=[!CommandMeasure MeasureSettingsToggle "Stop 1"][!CommandMeasure MeasureSettingsToggle "Execute 2"]
DynamicVariables=1
UpdateDivider=-1
SolidColor=0,0,0,1

[MeasureSettingsToggle]
Measure=Plugin
Plugin=ActionTimer

ActionList1=Repeat Show,15,5 
Show=[!SetVariable SettingsAngle "(Clamp(#SettingsAngle#+11,0,180))"][!SetVariable SettingsAlpha "(Clamp(#SettingsAlpha#+50,100,250))"][!UpdateMeasure MeasureSettingsToggle][!UpdateMeter SettingsToggle][!Redraw]

ActionList2= Repeat Hide,15,5
Hide=[!SetVariable SettingsAngle "(Clamp(#SettingsAngle#-11,0,180))"][!SetVariable SettingsAlpha "(Clamp(#SettingsAlpha#-50,100,250))"][!UpdateMeasure MeasureSettingsToggle][!UpdateMeter SettingsToggle][!Redraw]

DynamicVariables=1

[SettingsPaneContainer]
Meter=Shape
Shape=Rectangle 0,0,#Width#,#Height#,10 | Fill Color #Color4#
UpdateDivider=-1
Hidden=1

[SettingsPane]
Meter=Shape
Shape=Rectangle 0,0,#Width#,#Height#,10 | Fill Color #Color7# | StrokeWidth 0
UpdateDivider=-1
Container=SettingsPaneContainer

[MeterResolution]
Meter=String
Text=Resolution : #SCREENAREAWIDTH#x#SCREENAREAHEIGHT#
AntiAlias=1
FontSize=13
X=10
Y=10
FontFace=Inter
Container=SettingsPaneContainer
FontColor=#Color1#

[MeterChangeResolution]
Meter=Shape
Shape=Rectangle 0,0,80,28,10 | Fill Color #Color4# | StrokeWidth 2 | Stroke Color 255,255,255,100
X=(#ChangeX#-7)
Y=8
Container=SettingsPaneContainer

[MeterChangeResolutionText]
Meter=String
Text=Change
AntiAlias=1
FontSize=13
X=#ChangeX#
Y=10
FontFace=Inter
Container=SettingsPaneContainer
FontColor=#Color1#
LeftMouseUpAction=[!CommandMeasure MeasureInputResolution "Start"]

[MeasureInputResolution]
Measure=Plugin
Plugin=InputTextX.dll
Y=8
X=100
H=28
InputLimit=11
W=(#ChangeX#-110)
SolidColor=#Color2#
FontColor=#Color1#
FontSize=13
Align=Left
FontFace=Inter
DefaultValue=#SCREENAREAWIDTH#x#SCREENAREAHEIGHT#
AllowBorder=1
InputType=Custom
AllowedChars="1234567890 Xx"
OnEnterAction=[!SetOption MeterResolution Text "Resolution : $userinput$"][!SetVariable Resolution $userinput$][!UpdateMeter MeterChangeResolution][!Redraw]
BorderThickness=2
BorderColor=255,255,255,100

[MeterApplyResolution]
Meter=Shape
Shape=Rectangle 0,0,70,28,10 | Fill Color #Color2# | StrokeWidth 2 | Stroke Color 255,255,255,100
X=(#ApplyX#-10)
Y=8
Container=SettingsPaneContainer
LeftMouseDownAction=[!CommandMeasure MeasureApplyResolutionFg "Run"]

[MeterApplyResolutionText]
Meter=String
Text=Apply
AntiAlias=1
FontSize=13
X=(#ApplyX#)
Y=10
FontFace=Inter
Container=SettingsPaneContainer
FontColor=#Color1#

[MeasureApplyResolutionFg]
Measure=Plugin
Plugin=RunCommand
Program=#@#ImageMagick/magick.exe
Parameter=ForegroundT.png -alpha on -background none -resize #SCREENAREAWIDTH#x#SCREENAREAHEIGHT#^ -gravity north -extent #SCREENAREAWIDTH#x#SCREENAREAHEIGHT#^ Foreground.png
StartInFolder=#@#Images/
State=Hide
FinishAction=[!CommandMeasure MeasureApplyResolutionBg "Run"]

[MeasureApplyResolutionBg]
Measure=Plugin
Plugin=RunCommand
Program=#@#ImageMagick/magick.exe
Parameter=BackgroundT.jpg -resize #SCREENAREAWIDTH#x#SCREENAREAHEIGHT#^ -gravity north -extent #SCREENAREAWIDTH#x#SCREENAREAHEIGHT#^ -filter Lanczos -colorspace sRGB -quality 95 Background.jpg
StartInFolder=#@#Images/
State=Hide
FinishAction=[!Refresh "Mount Fuji\Time"]

[MeterScaleFactor]
Meter=String
Text=Scale Factor : #ScaleFactor#
AntiAlias=1
FontSize=13
X=10
Y=50
FontFace=Inter
Container=SettingsPaneContainer
FontColor=#Color1#

[MeterChangeScaleFactor]
Meter=Shape
Shape=Rectangle 0,0,80,28,10 | Fill Color #Color4# | StrokeWidth 2 | Stroke Color 255,255,255,100
X=(#ChangeX#-7)
Y=48
Container=SettingsPaneContainer

[MeterChangeScaleFactorText]
Meter=String
Text=Change
AntiAlias=1
FontSize=13
X=#ChangeX#
Y=50
FontFace=Inter
Container=SettingsPaneContainer
FontColor=#Color1#
LeftMouseUpAction=[!CommandMeasure MeasureInputScaleFactor "Start"]

[MeasureInputScaleFactor]
Measure=Plugin
Plugin=InputTextX.dll
Y=48
X=125
H=28
InputLimit=11
W=(#ChangeX#-135)
SolidColor=#Color2#
FontColor=#Color1#
FontSize=13
Align=Left
FontFace=Inter
DefaultValue=#ScaleFactor#
AllowBorder=1
InputType=Custom
AllowedChars="1234567890."
OnEnterAction=[!SetVariable ScaleFactor "$userinput$"][!SetOption MeterScaleFactor Text "Scale Factor : $userinput$"][!UpdateMeter MeterChangeResolution][!Redraw]
BorderThickness=2
DynamicVariables=1
BorderColor=255,255,255,100

[MeterApplyScaleFactor]
Meter=Shape
Shape=Rectangle 0,0,70,28,10 | Fill Color #Color2# | StrokeWidth 2 | Stroke Color 255,255,255,100
X=(#ApplyX#-10)
Y=48
Container=SettingsPaneContainer

[MeterApplyScaleFactorText]
Meter=String
Text=Apply
AntiAlias=1
FontSize=13
X=(#ApplyX#)
Y=50
FontFace=Inter
Container=SettingsPaneContainer
FontColor=#Color1#

